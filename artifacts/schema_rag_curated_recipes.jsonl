{"id": "query_recipe:success_count_for_program_with_variants", "doc_type": "query_recipe", "text": "Recipe: success count for a named program with variant handling. Join programs to program_statistics on programs.id = program_statistics.program_id. Filter programs.name by the user's program name. Return program_statistics.success_count. If multiple rows exist due to variants (variant_id), either sum across rows (SUM(success_count)) or choose variant_id IS NULL depending on requested semantics. For base program only, use WHERE variant_id IS NULL. For total across all variants, use SUM(success_count) GROUP BY program_id.", "metadata": {"model": "ProgramStatistics", "table": "program_statistics", "column": "success_count", "join_hints": ["program_statistics.program_id -> programs.id", "programs.name (filter by user's program name)"], "keywords": ["success", "count", "program", "name", "variant"], "semantics": "variant_id may require sum vs base-only", "source": "curated"}}
{"id": "query_recipe:failure_rate_calculation", "doc_type": "query_recipe", "text": "Recipe: calculate failure rate for a program. Join programs to program_statistics on programs.id = program_statistics.program_id. Filter programs.name by the user's program name. Calculate failure rate as: (failure_count / (success_count + failure_count)) * 100. Handle division by zero: if (success_count + failure_count) = 0, return NULL or 0. Return the calculated failure rate as a percentage.", "metadata": {"model": "ProgramStatistics", "table": "program_statistics", "column": "failure_count", "join_hints": ["program_statistics.program_id -> programs.id", "programs.name (filter by user's program name)"], "keywords": ["failure", "rate", "percentage", "program", "calculation"], "semantics": "Requires calculation: failure_count / (success_count + failure_count) * 100", "source": "curated"}}
{"id": "query_recipe:avg_execution_time_across_variants", "doc_type": "query_recipe", "text": "Recipe: average execution time for a program across all variants. Join programs to program_statistics on programs.id = program_statistics.program_id. Filter programs.name by the user's program name. Aggregate: AVG(avg_execution_time) grouped by program_id. If you want base program only (no variants), add filter variant_id IS NULL. If you want average across all variants, use AVG(avg_execution_time) without variant_id filter. Return the average execution time in seconds.", "metadata": {"model": "ProgramStatistics", "table": "program_statistics", "column": "avg_execution_time", "join_hints": ["program_statistics.program_id -> programs.id", "programs.name (filter by user's program name)"], "keywords": ["average", "execution", "time", "program", "variant", "avg"], "semantics": "Aggregation required: AVG(avg_execution_time) with optional variant_id filter", "source": "curated"}}
{"id": "query_recipe:program_usage_trends", "doc_type": "query_recipe", "text": "Recipe: program usage trends over time. Join programs to program_statistics on programs.id = program_statistics.program_id. Filter programs.name by the user's program name if specified. Filter by time using updated_at or last_used_at columns. Group by time period (day/week/month) using DATE functions. Return usage_count aggregated by time period. For trends, order by time period ascending to show progression over time.", "metadata": {"model": "ProgramStatistics", "table": "program_statistics", "column": "usage_count", "join_hints": ["program_statistics.program_id -> programs.id", "programs.name (optional filter)", "program_statistics.updated_at (time filter)", "program_statistics.last_used_at (time filter)"], "keywords": ["usage", "trend", "time", "over time", "history", "pattern"], "semantics": "Time-based aggregation and grouping required", "source": "curated"}}
{"id": "query_recipe:program_execution_history", "doc_type": "query_recipe", "text": "Recipe: execution history for a program. Join programs to program_executions on programs.id = program_executions.program_id. Filter programs.name by the user's program name. Optionally filter by variant_id if specific variant requested. Order by executed_at descending to show most recent executions first. Return execution details: execution_time, success status, error_message if failed, executed_at timestamp. Can aggregate to get count of executions, success rate, average execution time.", "metadata": {"model": "ProgramExecution", "table": "program_executions", "column": "execution_time", "join_hints": ["program_executions.program_id -> programs.id", "programs.name (filter by user's program name)", "program_executions.variant_id (optional filter)"], "keywords": ["execution", "history", "program", "executed", "run"], "semantics": "Join to program_executions table for detailed execution history", "source": "curated"}}
